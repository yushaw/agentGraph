# æ¡Œé¢ AI æ¡†æ¶ - äº§å“å¼€å‘è§„åˆ’ï¼ˆä¼˜åŒ–ç‰ˆ v5.0ï¼‰

> - æ ¸å¿ƒæ¶æ„æ–‡æ¡£ï¼š`docs/ARCHITECTURE.md`
> - åŠŸèƒ½ç‰¹æ€§æ–‡æ¡£ï¼š`docs/FEATURES.md`


## ğŸš€ é‡Œç¨‹ç¢‘ V1: æ ¸å¿ƒå¼•æ“ä¸åŸºç¡€ UI (Core Engine & Basic UI)

**ğŸ¯ æ ¸å¿ƒç›®æ ‡**ï¼šè·‘é€š"Hello World"ã€‚åœ¨å®¢æˆ·ç«¯å®ç°ä¸€ä¸ªæœ€ç²¾ç®€çš„ `SimpleAgent` (TS LangGraph)ï¼Œå¹¶ä¸ºå…¶æ­å»ºä¸€ä¸ªåŸºç¡€ UIï¼Œå®ç°ä»ç”¨æˆ·è¾“å…¥ â†’ å®¢æˆ·ç«¯ç¼–æ’ â†’ äº‘ç«¯ LLM â†’ å®¢æˆ·ç«¯å“åº”çš„æœ€å°é—­ç¯ã€‚

### 1.1 å¯å¿«é€Ÿè½åœ°åœºæ™¯/åŠŸèƒ½ (äº§å“åŠŸèƒ½)

* **æ ‡å‡†å¯¹è¯çª—å£**ï¼šä½œä¸ºç‹¬ç«‹çš„äº§å“å½¢æ€ï¼Œæä¾›é€šç”¨èŠå¤©ï¼ˆå¦‚"èŠå¤©åŠ©æ‰‹"ï¼‰ã€‚
* **AI æ‚¬æµ®çª—/ä¾§è¾¹æ **ï¼šæ»¡è¶³ç”¨æˆ·å³æ—¶çš„åˆ’è¯ç¿»è¯‘ã€æ–‡æœ¬æ¶¦è‰²ã€ä»£ç è§£é‡Šç­‰"è½»äº¤äº’"éœ€æ±‚ã€‚

### 1.2 å‰å°ç•Œé¢ä¸æ•°æ®å¥‘çº¦ (UI & API)

#### 1.2.1 å‰å°ç•Œé¢ (UI äº¤äº’)

**è¦å®ç°çš„åŠŸèƒ½ç‚¹ï¼š**

* å®ç°ä¸€ä¸ªåŸºç¡€çš„ Agent æ¨¡æ¿æ¸²æŸ“å™¨ã€‚
* å®ç° `emptyStateGuidance`ï¼ˆç©ºç™½çŠ¶æ€å¼•å¯¼ï¼‰çš„æ¸²æŸ“ï¼ŒåŒ…æ‹¬ `hint`, `placeholder` å’Œ `examples` å¡ç‰‡ã€‚
* å®ç° `examples` å¡ç‰‡ç‚¹å‡»å `presetInput` è‡ªåŠ¨å¡«å……ã€‚
* å®ç°åŸºç¡€ `InputParam` æ§ä»¶ï¼š`textarea`ã€‚
* å®ç° `inputTemplate` çš„è§£æå’Œå±•ç¤ºï¼ˆç”¨äºæ„å›¾ç¡®è®¤ï¼‰ã€‚

**V1 äº¤ä»˜çš„æ¨¡æ¿ç¤ºä¾‹ (ç®€å•èŠå¤©åŠ©æ‰‹)ï¼š**

```json
{
  "agentId": "com.company.agent.chat_assistant",
  "name": ["èŠå¤©åŠ©æ‰‹", "Chat Assistant"],
  "description": "æ™ºèƒ½å¯¹è¯åŠ©æ‰‹ï¼Œå¯ä»¥å›ç­”é—®é¢˜ã€æä¾›å»ºè®®",
  "category": "é€šç”¨åŠ©æ‰‹",
  "emptyStateGuidance": {
    "hint": "æˆ‘æ˜¯ä½ çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥å›ç­”é—®é¢˜ã€æä¾›å»ºè®®ã€å¸®åŠ©åˆ›ä½œ",
    "placeholder": "è¾“å…¥ä½ çš„é—®é¢˜æˆ–éœ€æ±‚ï¼Œå¼€å§‹å¯¹è¯...",
    "examples": [
      {
        "title": "æ—¥å¸¸å’¨è¯¢",
        "presetInput": { "message": "ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ" }
      },
      {
        "title": "å­¦ä¹ è¾…å¯¼",
        "presetInput": { "message": "è¯·è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ï¼Ÿ" }
      }
    ]
  },
  "inputTemplate": { /* ... */ },
  "promptTemplate": "{{input.message}}",
  "displayTemplate": "{{input.message}}",
  "parameters": {
    "input": [
      {
        "name": "message",
        "type": "textarea",
        "label": "ä½ çš„æ¶ˆæ¯",
        "required": true,
        "rows": 3,
        "placeholder": "è¾“å…¥ä½ çš„é—®é¢˜æˆ–éœ€æ±‚...",
        "hint": "å¯ä»¥é—®æˆ‘ä»»ä½•é—®é¢˜",
        "examples": [ "ä»Šå¤©æœ‰ä»€ä¹ˆé‡è¦æ–°é—»ï¼Ÿ" ]
      }
    ]
  }
}
```

#### 1.2.2 å‰ç«¯äº‹ä»¶æµæ•°æ®å¥‘çº¦ (API è¾“å‡º)

*è¿™æ˜¯**å®¢æˆ·ç«¯ç¼–æ’å±‚ (TS LangGraph)** è¾“å‡ºç»™**å®¢æˆ·ç«¯ UI å±‚ (React/Vue)** çš„å†…éƒ¨äº‹ä»¶ã€‚*

| äº‹ä»¶ç±»å‹ (type) | è´Ÿè½½å†…å®¹ (payload) | UI å“åº” (äº¤äº’) |
| :--- | :--- | :--- |
| `AGENT_START` | `{ "agentId": "..." }` | é”å®šè¾“å…¥æ¡†ï¼Œæ˜¾ç¤º"æ€è€ƒä¸­..."åŠ¨ç”»ã€‚ |
| `AGENT_MESSAGE` | `{ "content": "..." }` | **(æœ€ç»ˆç­”æ¡ˆ)** åœ¨èŠå¤©çª—å£ä¸­æ¸²æŸ“ Markdown æ ¼å¼çš„å›å¤ã€‚ |
| `AGENT_END` | `{ "status": "success" }` | è§£é”è¾“å…¥æ¡†ï¼Œåœæ­¢"æ€è€ƒä¸­"åŠ¨ç”»ã€‚ |
| `AGENT_ERROR` | `{ "error": "..." }` | è§£é”è¾“å…¥æ¡†ï¼Œæ˜¾ç¤ºçº¢è‰²çš„é”™è¯¯æç¤ºä¿¡æ¯ã€‚ |

### 1.3 æ ¸å¿ƒåŠŸèƒ½å®ç° (æŠ€æœ¯å®ç°)

| åŠŸèƒ½æ¨¡å— | ç”¨æˆ·ä»·å€¼ | å‚è€ƒå®ç° | æ ¸å¿ƒå·¥ä½œé‡ | é£é™© |
|---------|---------|---------|-----------|------|
| **1. åŸºç¡€å¯¹è¯ç•Œé¢** | èƒ½å’Œ AI èŠå¤© | - | ğŸ”¸ **5-7 å¤©** | ğŸŸ¢ ä½ |
| - æ¶ˆæ¯åˆ—è¡¨ï¼ˆMarkdown æ¸²æŸ“ï¼‰ | çœ‹åˆ°æ ¼å¼åŒ–çš„å›å¤ | - | 2 å¤© | ğŸŸ¢ |
| - è¾“å…¥æ¡†ï¼ˆæ”¯æŒå¤šè¡Œï¼‰ | æ–¹ä¾¿è¾“å…¥é•¿æ–‡æœ¬ | - | 1 å¤© | ğŸŸ¢ |
| - æµå¼è¾“å‡ºåŠ¨ç”» | çœ‹åˆ° AI "æ­£åœ¨æ€è€ƒ" | - | 2 å¤© | ğŸŸ¢ |
| **2. SimpleAgent ç¼–æ’** | AI èƒ½è‡ªä¸»å†³ç­– | `simpleAgent/simple_agent.py` | ğŸ”¸ **7-10 å¤©** | ğŸŸ¡ ä¸­ |
| - Agent Loop (Planner â†’ Finalize) | æ ¸å¿ƒç¼–æ’é€»è¾‘ | `generalAgent/graph/builder.py` | 5 å¤© | ğŸŸ¡ |
| - æµå¼äº‹ä»¶è¾“å‡º | UI å®æ—¶æ›´æ–° | `generalAgent/cli.py:252-288` | 2 å¤© | ğŸŸ¢ |
| - é”™è¯¯å¤„ç† | AI å‡ºé”™æ—¶ä¼˜é›…é™çº§ | `generalAgent/graph/nodes/planner.py` | 1 å¤© | ğŸŸ¢ |
| **3. ä¼šè¯ç®¡ç†** | èƒ½ä¿å­˜å’Œæ¢å¤å¯¹è¯ | `shared/session/` | ğŸ”¸ **3-5 å¤©** | ğŸŸ¢ ä½ |
| - ä¼šè¯åˆ—è¡¨ä¾§è¾¹æ  | æŸ¥çœ‹å†å²ä¼šè¯ | `generalAgent/persistence/session_store.py` | 2 å¤© | ğŸŸ¢ |
| - ä¼šè¯æŒä¹…åŒ– | è‡ªåŠ¨ä¿å­˜ | `shared/session/store.py` (SQLite) | 2 å¤© | ğŸŸ¢ |
| **4. LLM ç½‘å…³ï¼ˆæ¨è SaaSï¼‰** | è¿æ¥äº‘ç«¯ LLM | - | ğŸ”¸ **2-3 å¤©** | ğŸŸ¢ ä½ |
| - API é…ç½® | é…ç½® LLM å‡­è¯ | `generalAgent/config/settings.py` | 1 å¤© | ğŸŸ¢ |
| - ç½‘å…³é›†æˆ | é€æ˜ä»£ç† | æ¨èä½¿ç”¨ Helicone/Portkey | 1 å¤© | ğŸŸ¢ |
| **5. æ¡Œé¢åº”ç”¨æ¡†æ¶** | ç”¨æˆ·èƒ½å®‰è£…ä½¿ç”¨ | - | ğŸ”¸ **5-7 å¤©** | ğŸŸ¡ ä¸­ |
| - åº”ç”¨æ¡†æ¶æ­å»º | çª—å£ç®¡ç† | Electron/Tauri æ¡†æ¶ | 3 å¤© | ğŸŸ¡ |
| - è·¨å¹³å°æ‰“åŒ… | macOS/Windows/Linux | electron-builder/tauri | 2 å¤© | ğŸŸ¡ |

### 1.4 V1 å·¥ä½œé‡æ±‡æ€»

| ç±»åˆ« | æ€»å·¥ä½œé‡ | è¯´æ˜ |
|------|---------|------|
| **å‰ç«¯ UI** | å¤© | å¯¹è¯ç•Œé¢ + æ¨¡æ¿æ¸²æŸ“ |
| **ç¼–æ’å¼•æ“** | å¤© | TS LangGraph Agent Loop |
| **ä¼šè¯ç®¡ç†** | å¤© | æœ¬åœ°æŒä¹…åŒ– |
| **ç½‘å…³é›†æˆ** | å¤© | LLM API ç½‘å…³ï¼ˆæ¨è SaaSï¼‰ |
| **åº”ç”¨æ‰“åŒ…** | å¤© | Electron/Tauri æ¡†æ¶ |
| **æµ‹è¯•è°ƒè¯•** | å¤© | ç«¯åˆ°ç«¯æµ‹è¯• |
| **V1 æ€»è®¡** | **å¤©** | **5.5-8 å‘¨ï¼ˆå•äººå…¨èŒï¼‰** |

### 1.5 V1 é‡Œç¨‹ç¢‘äº¤ä»˜

**Week 8 ç»“æŸæ—¶ï¼Œç”¨æˆ·èƒ½ï¼š**
- âœ… å®‰è£…æ¡Œé¢åº”ç”¨
- âœ… ä¸ AI è‡ªç„¶å¯¹è¯
- âœ… çœ‹åˆ°æµå¼è¾“å‡º
- âœ… ä¿å­˜å’Œåˆ‡æ¢å¤šä¸ªä¼šè¯

**ç”¨æˆ·åé¦ˆå…³é”®æŒ‡æ ‡ï¼š**
- å®‰è£…æˆåŠŸç‡ > 90%
- å¯¹è¯å“åº”é€Ÿåº¦ < 3 ç§’
- ä¼šè¯ä¿å­˜æˆåŠŸç‡ > 95%

---

## ğŸš€ é‡Œç¨‹ç¢‘ V2: å…¨èƒ½å•ä½“ä¸é«˜çº§å¼•å¯¼ (Full-Fledged Agent & Guidance UI)

**ğŸ¯ æ ¸å¿ƒç›®æ ‡**ï¼šæ„å»º"å®Œå…¨ä½“"çš„ `GeneralAgent`ã€‚åœ¨**å®¢æˆ·ç«¯**äº¤ä»˜æ‰€æœ‰æ ¸å¿ƒèƒ½åŠ›ï¼ˆæœ¬åœ°å·¥å…·ã€æ–‡ä»¶å¤„ç†ã€æŠ€èƒ½ã€å®‰å…¨ã€è®°å¿†ï¼‰ï¼Œå¹¶*åŒæ­¥äº¤ä»˜*å®Œæ•´çš„**é«˜çº§å¼•å¯¼ UI**ã€‚

### 2.1 å¯å¿«é€Ÿè½åœ°åœºæ™¯/åŠŸèƒ½ (äº§å“åŠŸèƒ½)

* **æœ¬åœ°æ–‡ä»¶åŠ©æ‰‹**ï¼šAgent èƒ½å¤Ÿè¯»å–ã€æœç´¢ã€ç¼–è¾‘å’Œå†™å…¥**æœ¬åœ°æ–‡ä»¶æ²™ç®±**ã€‚
* **Web ç ”ç©¶åŠ©æ‰‹**ï¼šAgent èƒ½ï¼ˆé€šè¿‡å®¢æˆ·ç«¯ï¼‰è®¿é—®ç½‘ç»œè¿›è¡Œèµ„æ–™æœé›†ã€‚
* **å®‰å…¨æ‰§è¡Œæ²™ç®±**ï¼šAgent èƒ½åœ¨**ç”¨æˆ·å®¡æ‰¹** (HITL) ä¸‹æ‰§è¡Œæœ¬åœ° `bash` å‘½ä»¤ã€‚
* **ä¸“ä¸šæ–‡æ¡£å¤„ç†å™¨**ï¼šé€šè¿‡**æŠ€èƒ½ç³»ç»Ÿ** (`@pdf`, `@docx`...)ï¼Œå®ç°å¯¹æœ¬åœ°æ–‡æ¡£çš„ä¸“ä¸šæ“ä½œã€‚
* **é•¿æ—¶é™ªä¼´åŠ©æ‰‹**ï¼šé€šè¿‡**æœ¬åœ°ä¼šè¯æŒä¹…åŒ–**å’Œ**ä¸Šä¸‹æ–‡å‹ç¼©**ï¼Œå®ç°é•¿æœŸè®°å¿†ã€‚

### 2.2 å‰å°ç•Œé¢ä¸æ•°æ®å¥‘çº¦ (UI & API)

#### 2.2.1 å‰å°ç•Œé¢ (UI äº¤äº’)

**è¦å®ç°çš„åŠŸèƒ½ç‚¹ï¼š**

* **ã€é‡ç‚¹ã€‘** å®ç°**æ‰€æœ‰é«˜çº§ `InputParam` æ§ä»¶**ï¼š
    * `text`, `number`, `select`, `checkbox`, `date`, `url`
    * **`file`, `image`, `video`, `audio`** (è¿™äº›æ§ä»¶éœ€è¦ä¸**å®¢æˆ·ç«¯åŸç”Ÿå±‚**çš„æ–‡ä»¶æ²™ç®± API å¯¹æ¥)ã€‚
* **ã€V2 æ ¸å¿ƒäº¤äº’ã€‘** åœ¨ UI å±‚å®ç° **HITL** çš„ä¸¤ä¸ªæ ¸å¿ƒå¼¹çª—ï¼š
  1. **ä¸»åŠ¨æé—®å¼¹çª—** (ç›‘å¬ `INTERRUPT_ASK_HUMAN`)ã€‚
  2. **å®‰å…¨å®¡æ‰¹å¼¹çª—** (ç›‘å¬ `INTERRUPT_APPROVAL`)ã€‚

**V2 äº¤ä»˜çš„æ¨¡æ¿ç¤ºä¾‹ (æ–‡æ¡£å¤„ç†åŠ©æ‰‹)ï¼š**

```json
{
  "agentId": "com.company.agent.document_processor",
  "name": ["æ–‡æ¡£å¤„ç†åŠ©æ‰‹", "Document Processor"],
  "category": "æ–‡æ¡£å·¥å…·",
  "emptyStateGuidance": { /* ... */ },
  "parameters": {
    "input": [
      {
        "name": "document",
        "type": "file",
        "label": "ä¸Šä¼ æ–‡æ¡£",
        "required": true,
        "accept": ".pdf,.doc,.docx,.txt",
        "multiple": true,
        "maxSize": 20
      },
      {
        "name": "taskType",
        "type": "select",
        "label": "å¤„ç†ä»»åŠ¡",
        "options": [
          { "value": "summarize", "label": "ç”Ÿæˆæ‘˜è¦", "default": true },
          { "value": "extract", "label": "ä¿¡æ¯æå–" }
        ]
      },
      {
        "name": "extractFields",
        "type": "checkbox",
        "options": [
          { "value": "dates", "label": "æ—¥æœŸæ—¶é—´", "checked": true },
          { "value": "amounts", "label": "é‡‘é¢æ•°å­—", "checked": true }
        ]
      }
    ]
  }
}
```

#### 2.2.2 å‰ç«¯äº‹ä»¶æµæ•°æ®å¥‘çº¦ (API è¾“å‡º)

*V1 äº‹ä»¶...* **(å¹¶æ–°å¢ä»¥ä¸‹ V2 äº‹ä»¶)**

| äº‹ä»¶ç±»å‹ (type) | è´Ÿè½½å†…å®¹ (payload) | UI å“åº” (äº¤äº’) |
| :--- | :--- | :--- |
| `TOOL_CALL` | `{ "tool_name": "read_file", "args": { "path": "..." } }` | åœ¨èŠå¤©æµä¸­æ˜¾ç¤º `[Tool Call: æ­£åœ¨è¯»å–æ–‡ä»¶ "..." ]` åŠ¨ç”»ã€‚ |
| `TOOL_RESULT` | `{ "tool_name": "read_file", "status": "success", "result": "..." }` | (å¯é€‰) åœ¨èŠå¤©æµä¸­æ˜¾ç¤º `[Tool Result: å·²è¯»å–æ–‡ä»¶]`ã€‚ |
| **`INTERRUPT_APPROVAL`** | `{ "tool": "run_bash_command", "args": "...", "reason": "...", "risk_level": "high" }` | **(å…³é”®)** æš‚åœä¸€åˆ‡ï¼Œå¼¹å‡ºä¸€ä¸ª**å®‰å…¨å®¡æ‰¹æ¨¡æ€æ¡†**ï¼Œæ˜¾ç¤º `payload` ä¸­çš„æ‰€æœ‰ä¿¡æ¯ã€‚ |
| **`INTERRUPT_ASK_HUMAN`** | `{ "question": "...", "default": "...", "context": "..." }` | **(å…³é”®)** æš‚åœä¸€åˆ‡ï¼Œå¼¹å‡ºä¸€ä¸ª**æé—®æ¨¡æ€æ¡†**ï¼Œæ˜¾ç¤º `question` å’Œ `default`ã€‚ |
| `SESSION_SAVE` | `{ "status": "saved" }` | (å¯é€‰) åœ¨ UI è§’è½æ˜¾ç¤ºä¸€ä¸ª"å·²ä¿å­˜"çš„ checkmarkã€‚ |
| `CONTEXT_COMPRESS` | `{ "status": "start" / "end" }` | (å¯é€‰) æ˜¾ç¤ºä¸€ä¸ª"æ­£åœ¨å‹ç¼©å†å²..."çš„ toast æç¤ºã€‚ |
| `TODO_UPDATE` | `{ "todos": [...] }` | åœ¨ä¾§è¾¹æ æˆ–é¢æ¿ä¸­æ›´æ–°ä»»åŠ¡åˆ—è¡¨ã€‚ |

### 2.3 æ ¸å¿ƒåŠŸèƒ½å®ç° (æŠ€æœ¯å®ç°)

| åŠŸèƒ½æ¨¡å— | ç”¨æˆ·ä»·å€¼ | å‚è€ƒå®ç° | æ ¸å¿ƒå·¥ä½œé‡ | é£é™© |
|---------|---------|---------|-----------|------|
| **1. TODO ä»»åŠ¡è¿½è¸ª** | çœ‹åˆ° AI çš„å·¥ä½œè®¡åˆ’ | `generalAgent/tools/builtin/todo_*.py` | ğŸ”¸ **3-5 å¤©** | ğŸŸ¢ ä½ |
| - TODO åˆ—è¡¨ UI | å¯è§†åŒ–ä»»åŠ¡è¿›åº¦ | - | 2 å¤© | ğŸŸ¢ |
| - å®æ—¶æ›´æ–° | ä»»åŠ¡çŠ¶æ€åŒæ­¥ | - | 1 å¤© | ğŸŸ¢ |
| **2. HITL äººæœºåä½œ** | AI ä¸»åŠ¨æé—® + å®‰å…¨å®¡æ‰¹ | `generalAgent/hitl/` | ğŸ”¸ **7-10 å¤©** | ğŸŸ¡ ä¸­ |
| - ask_human å·¥å…· | Agent ä¸»åŠ¨è¯¢é—®ç”¨æˆ· | `generalAgent/tools/builtin/ask_human.py` | 2 å¤© | ğŸŸ¢ |
| - 4 å±‚å®¡æ‰¹è§„åˆ™å¼•æ“ | çµæ´»çš„é£é™©æ£€æµ‹ | `generalAgent/hitl/approval_checker.py` | 4 å¤© | ğŸŸ¡ |
| - å®¡æ‰¹å¼¹çª— UI | æ¸…æ™°çš„é£é™©æç¤º | `generalAgent/cli.py:370-443` | 2 å¤© | ğŸŸ¢ |
| **3. æŠ€èƒ½ç³»ç»Ÿ** | æ‰©å±• AI çš„ä¸“ä¸šèƒ½åŠ› | `generalAgent/skills/`, `generalAgent/config/skills.yaml` | ğŸ”¸ **7-10 å¤©** | ğŸŸ¡ ä¸­ |
| - @mention è§£æ | è¯†åˆ«æŠ€èƒ½å¼•ç”¨ | `generalAgent/utils/mention_classifier.py` | 2 å¤© | ğŸŸ¢ |
| - æŠ€èƒ½åŒ…åŠ¨æ€åŠ è½½ | åŠ è½½ SKILL.md | `shared/workspace/manager.py` | 3 å¤© | ğŸŸ¡ |
| - æŠ€èƒ½ç›®å½• UI | æµè§ˆå¯ç”¨æŠ€èƒ½ | `generalAgent/config/skill_config_loader.py` | 2 å¤© | ğŸŸ¢ |
| **4. æ–‡ä»¶æ²™ç®±ç³»ç»Ÿ** | å®‰å…¨çš„æ–‡ä»¶éš”ç¦» | `shared/workspace/manager.py` | ğŸ”¶ **7-10 å¤©** | ğŸŸ¡ ä¸­ |
| - å·¥ä½œåŒºç›®å½•éš”ç¦» | åŸºç¡€çš„æ–‡ä»¶éš”ç¦» | `generalAgent/persistence/workspace.py` | 3 å¤© | ğŸŸ¡ |
| - æ–‡ä»¶ä¸Šä¼ ä¸ç®¡ç† | UI æ–‡ä»¶æ“ä½œ | - | 2 å¤© | ğŸŸ¢ |
| - å®‰å…¨è·¯å¾„éªŒè¯ | é˜²æ­¢è·¯å¾„é€ƒé€¸ | - | 2 å¤© | ğŸŸ¡ |
| **5. æ–‡ä»¶æ“ä½œå·¥å…·** | AI èƒ½æ“ä½œæ–‡ä»¶ | `generalAgent/tools/builtin/file_ops.py` | ğŸ”¸ **5-7 å¤©** | ğŸŸ¢ ä½ |
| - read_file/write_file | è¯»å†™æ–‡ä»¶ | `generalAgent/tools/builtin/file_ops.py` | 2 å¤© | ğŸŸ¢ |
| - find_files | æ–‡ä»¶åæœç´¢ | `generalAgent/tools/builtin/find_files.py` | 2 å¤© | ğŸŸ¢ |
| - list_workspace_files | åˆ—å‡ºå·¥ä½œåŒº | `generalAgent/tools/builtin/file_ops.py` | 1 å¤© | ğŸŸ¢ |
| **6. æ–‡æ¡£å¤„ç†èƒ½åŠ›** | å¤„ç† PDF/DOCX/XLSX ç­‰ | `generalAgent/utils/document_extractors.py` | ğŸ”¶ **10-15 å¤©** | ğŸŸ  ä¸­é«˜ |
| - æ–‡æ¡£å†…å®¹æå– | æå–æ–‡æœ¬å’Œç»“æ„ | `generalAgent/utils/document_extractors.py` | 5 å¤© | ğŸŸ¡ |
| - æ–‡æ¡£ç´¢å¼•ä¸æœç´¢ | å¿«é€ŸæŸ¥æ‰¾ä¿¡æ¯ | `generalAgent/utils/text_indexer.py` (FTS5) | 5 å¤© | ğŸŸ  |
| - search_file å·¥å…· | å†…å®¹æœç´¢ | `generalAgent/tools/builtin/search_file.py` | 3 å¤© | ğŸŸ¡ |
| **7. ç½‘ç»œå·¥å…·** | AI èƒ½æœç´¢ç½‘ç»œ | `generalAgent/tools/builtin/` | ğŸ”¸ **3-5 å¤©** | ğŸŸ¢ ä½ |
| - fetch_web | è·å–ç½‘é¡µå†…å®¹ | - | 2 å¤© | ğŸŸ¢ |
| - search_web | æœç´¢å¼•æ“ | - | 2 å¤© | ğŸŸ¢ |
| **8. å‘½ä»¤æ‰§è¡Œï¼ˆæ²™ç®±ï¼‰** | æ‰§è¡Œ bash å‘½ä»¤ | `generalAgent/tools/builtin/run_bash_command.py` | ğŸ”¸ **3-5 å¤©** | ğŸŸ¡ ä¸­ |
| - run_bash_command å·¥å…· | æ‰§è¡Œå‘½ä»¤ | `generalAgent/tools/builtin/run_bash_command.py` | 2 å¤© | ğŸŸ¡ |
| - è¶…æ—¶å’Œå®‰å…¨æ§åˆ¶ | é˜²æ­¢æ¶æ„å‘½ä»¤ | - | 2 å¤© | ğŸŸ¡ |
| **9. ä¸Šä¸‹æ–‡ç®¡ç†** | æ”¯æŒé•¿å¯¹è¯ | `generalAgent/context/compressor.py` | ğŸ”¶ **10-15 å¤©** | ğŸŸ  ä¸­é«˜ |
| - Token ç›‘æ§ | å®æ—¶ç›‘æ§ä½¿ç”¨é‡ | `generalAgent/graph/nodes/planner.py` | 3 å¤© | ğŸŸ¢ |
| - è‡ªåŠ¨å‹ç¼©è§¦å‘ | è¶…è¿‡é˜ˆå€¼è‡ªåŠ¨å‹ç¼© | `generalAgent/graph/routing.py` | 2 å¤© | ğŸŸ¢ |
| - LLM æ‘˜è¦å‹ç¼© | ä¿ç•™ä¸Šä¸‹æ–‡çš„å‹ç¼© | `generalAgent/graph/nodes/summarization.py` | 5 å¤© | ğŸŸ  |
| **10. ä¸“ä¸šæŠ€èƒ½åŒ…** | PDF/DOCX æ·±åº¦æ“ä½œ | `generalAgent/skills/pdf/`, `skills/docx/` ç­‰ | ğŸ”¸ **5-7 å¤©** | ğŸŸ¢ ä½ |
| - pdf æŠ€èƒ½ | PDF è¡¨å•å¡«å†™ç­‰ | `generalAgent/skills/pdf/SKILL.md` | 2 å¤© | ğŸŸ¢ |
| - docx/xlsx/pptx æŠ€èƒ½ | å¯¹åº”æ ¼å¼æ“ä½œ | `generalAgent/skills/docx/`, `xlsx/`, `pptx/` | 3 å¤© | ğŸŸ¢ |

### 2.4 V2 å·¥ä½œé‡æ±‡æ€»

| ç±»åˆ« | æ€»å·¥ä½œé‡ | è¯´æ˜ |
|------|---------|------|
| **é«˜çº§ UI æ§ä»¶** | | file/image/select/checkbox ç­‰ |
| **HITL ç³»ç»Ÿ** | å¤© | æé—® + å®¡æ‰¹ |
| **TODO ç³»ç»Ÿ** | å¤© | ä»»åŠ¡è¿½è¸ª |
| **æŠ€èƒ½ç³»ç»Ÿ** | å¤© | @mention + åŠ è½½ |
| **æ–‡ä»¶æ²™ç®±** | å¤© | å·¥ä½œåŒºéš”ç¦» |
| **æ–‡ä»¶æ“ä½œå·¥å…·** | å¤© | read/write/find |
| **æ–‡æ¡£å¤„ç†** | å¤© | PDF/DOCX + ç´¢å¼•æœç´¢ |
| **ç½‘ç»œå·¥å…·** | å¤© | fetch/search |
| **å‘½ä»¤æ‰§è¡Œ** | å¤© | bash æ²™ç®± |
| **ä¸Šä¸‹æ–‡ç®¡ç†** | å¤© | Token ç›‘æ§ + å‹ç¼© |
| **ä¸“ä¸šæŠ€èƒ½åŒ…** | å¤© | pdf/docx/xlsx/pptx |
| **æµ‹è¯•è°ƒè¯•** | å¤© | é›†æˆæµ‹è¯• |
| **V2 æ€»è®¡** | **8å¤©** | **16-25 å‘¨ï¼ˆå•äººå…¨èŒï¼‰** |

### 2.5 V2 é‡Œç¨‹ç¢‘äº¤ä»˜

**Week 33 ç»“æŸæ—¶ï¼Œç”¨æˆ·èƒ½ï¼š**
- âœ… ä¸Šä¼ å¹¶å¤„ç†æ–‡ä»¶ï¼ˆåŒ…æ‹¬ PDF/DOCX/XLSX/PPTXï¼‰
- âœ… çœ‹åˆ° AI çš„ä»»åŠ¡è®¡åˆ’ï¼ˆTODO åˆ—è¡¨ï¼‰
- âœ… åœ¨å±é™©æ“ä½œæ—¶è·å¾—å®¡æ‰¹æç¤º
- âœ… é€šè¿‡ @mention åŠ è½½ä¸“ä¸šæŠ€èƒ½
- âœ… è®© AI æœç´¢ç½‘ç»œã€æ‰§è¡Œå‘½ä»¤
- âœ… è¿›è¡Œé•¿æ—¶é—´å¯¹è¯ï¼ˆè‡ªåŠ¨å‹ç¼©ï¼‰
- âœ… åœ¨å¤§æ–‡æ¡£ä¸­å¿«é€Ÿæœç´¢ä¿¡æ¯

---

## ğŸš€ é‡Œç¨‹ç¢‘ V3: æ™ºèƒ½åä½œ (Autonomous & Collaborative Agents)

**ğŸ¯ æ ¸å¿ƒç›®æ ‡**ï¼šè®© Agent "å­¦ä¼šæ€è€ƒ"å’Œ"å­¦ä¼šåä½œ"ã€‚åœ¨**å®¢æˆ·ç«¯ (TS LangGraph)** å†…éƒ¨å®ç°æ¨¡å‹è·¯ç”±å’Œå¤š Agent åä½œã€‚

### 3.1 å¯å¿«é€Ÿè½åœ°åœºæ™¯/åŠŸèƒ½ (äº§å“åŠŸèƒ½)

* **æ™ºèƒ½å›¾åƒåˆ†æ**ï¼šç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ï¼Œ**å®¢æˆ·ç«¯**è‡ªåŠ¨æ£€æµ‹å¹¶è¯·æ±‚ `vision` æ¨¡å‹è¿›è¡Œåˆ†æã€‚
* **ä¸“å®¶ä»£ç åŠ©æ‰‹**ï¼šç”¨æˆ·è¯·æ±‚ç”Ÿæˆä»£ç ï¼Œ**å®¢æˆ·ç«¯**è‡ªåŠ¨è¯·æ±‚ `code` æ¨¡å‹ã€‚
* **å¤æ‚ä»»åŠ¡è‡ªåŠ¨æ‹†è§£**ï¼šä¸» Agentï¼ˆç»ç†ï¼‰è‡ªåŠ¨å§”æ´¾ç»™ Subagentï¼ˆå‘˜å·¥ï¼‰æ‰§è¡Œï¼Œ**å…¨éƒ¨åœ¨å®¢æˆ·ç«¯ TS LangGraph ä¸­å®Œæˆ**ã€‚

### 3.2 å‰å°ç•Œé¢ä¸æ•°æ®å¥‘çº¦ (UI & API)

#### 3.2.1 å‰å°ç•Œé¢ (UI äº¤äº’)

**è¦å®ç°çš„åŠŸèƒ½ç‚¹ï¼š**

* **ã€V3 æ ¸å¿ƒäº¤äº’ã€‘** å®ç° **Subagent æµå¼æ—¥å¿—æ¸²æŸ“å™¨**ã€‚
* å‰ç«¯å¿…é¡»èƒ½æ¥æ”¶ `SUBAGENT_STREAM_...` äº‹ä»¶ï¼Œå¹¶**åœ¨ä¸»èŠå¤©æµä¸­æ¸²æŸ“ä¸€ä¸ª"ç¼©è¿›"æˆ–"æŠ˜å "çš„æ—¥å¿—å—**ï¼Œå®æ—¶å±•ç¤º Subagent çš„æ‰§è¡Œè¿‡ç¨‹ã€‚

**V3 äº¤ä»˜çš„æ¨¡æ¿ç¤ºä¾‹ (å›¾ç‰‡åˆ†æåŠ©æ‰‹)ï¼š**

```json
{
  "agentId": "com.company.agent.image_analyzer",
  "name": ["å›¾ç‰‡åˆ†æåŠ©æ‰‹", "Image Analyzer"],
  "category": "å›¾åƒå¤„ç†",
  "parameters": {
    "input": [
      {
        "name": "images",
        "type": "image",
        "label": "ä¸Šä¼ å›¾ç‰‡",
        "required": true
      },
      {
        "name": "question",
        "type": "textarea",
        "label": "å…·ä½“éœ€æ±‚"
      }
    ]
  }
}
```

#### 3.2.2 å‰ç«¯äº‹ä»¶æµæ•°æ®å¥‘çº¦ (API è¾“å‡º)

*V1, V2 äº‹ä»¶...* **(å¹¶æ–°å¢ä»¥ä¸‹ V3 äº‹ä»¶)**

| äº‹ä»¶ç±»å‹ (type) | è´Ÿè½½å†…å®¹ (payload) | UI å“åº” (äº¤äº’) |
| :--- | :--- | :--- |
| `MODEL_ROUTE` | `{ "from": "chat", "to": "vision", "reason": "Image detected" }` | (å¯é€‰) æ˜¾ç¤ºä¸€ä¸ª "å·²åˆ‡æ¢åˆ° Vision æ¨¡å‹" çš„ toast æç¤ºã€‚ |
| **`SUBAGENT_STREAM_START`** | `{ "context_id": "subagent-abc", "task": "..." }` | **(å…³é”®)** åœ¨ UI ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ã€ç¼©è¿›çš„æ—¥å¿—å—ã€‚ |
| **`SUBAGENT_STREAM_MESSAGE`** | `{ "context_id": "subagent-abc", "message": "Loop 1: Searching..." }` | **(å…³é”®)** åœ¨å¯¹åº”çš„æ—¥å¿—å—ä¸­è¿½åŠ  `message` å†…å®¹ã€‚ |
| `SUBAGENT_STREAM_END` | `{ "context_id": "subagent-abc", "status": "success" }` | å…³é—­å¯¹åº”çš„æ—¥å¿—å—ï¼Œå¹¶æ˜¾ç¤º"å­ä»»åŠ¡å®Œæˆ"ã€‚ |

### 3.3 æ ¸å¿ƒåŠŸèƒ½å®ç° (æŠ€æœ¯å®ç°)

| åŠŸèƒ½æ¨¡å— | ç”¨æˆ·ä»·å€¼ | å‚è€ƒå®ç° | æ ¸å¿ƒå·¥ä½œé‡ | é£é™© |
|---------|---------|---------|-----------|------|
| **1. æ¨¡å‹è·¯ç”±ç³»ç»Ÿ** | AI è‡ªåŠ¨é€‰æœ€ä¼˜æ¨¡å‹ | `generalAgent/models/registry.py` | ğŸ”¶ **7-10 å¤©** | ğŸŸ¡ ä¸­ |
| - æ¨¡å‹æ³¨å†Œè¡¨ | ç®¡ç†å¤šä¸ªæ¨¡å‹ | `generalAgent/models/registry.py` | 2 å¤© | ğŸŸ¢ |
| - è·¯ç”±è§„åˆ™å¼•æ“ | æ ¹æ®ä»»åŠ¡é€‰æ¨¡å‹ | - | 3 å¤© | ğŸŸ¡ |
| - æ¨¡å‹åˆ‡æ¢ UI | æ˜¾ç¤ºå½“å‰æ¨¡å‹ | - | 2 å¤© | ğŸŸ¢ |
| **2. Multi-Agent ç³»ç»Ÿ** | åä½œå®Œæˆå¤æ‚ä»»åŠ¡ | `generalAgent/tools/builtin/delegate_task.py` | ğŸ”¶ **10-15 å¤©** | ğŸŸ  ä¸­é«˜ |
| - delegate_task å·¥å…· | å§”æ´¾ä»»åŠ¡ç»™ Subagent | `generalAgent/tools/builtin/delegate_task.py` | 5 å¤© | ğŸŸ  |
| - å·¥å…·/æŠ€èƒ½ç»§æ‰¿ | å­ Agent ç»§æ‰¿èƒ½åŠ› | `generalAgent/graph/nodes/planner.py:360-376` | 3 å¤© | ğŸŸ¡ |
| - Subagent æ—¥å¿— UI | å¯è§†åŒ–åä½œè¿‡ç¨‹ | - | 4 å¤© | ğŸŸ¡ |
| **3. Agent æ³¨å†Œè¡¨** | ç®¡ç†å¤šç§ Agent | `generalAgent/agents/`, `generalAgent/config/agents.yaml` | ğŸ”¸ **5-7 å¤©** | ğŸŸ¢ ä½ |
| - Agent Card è§£æ | åŠ è½½ Agent å®šä¹‰ | `generalAgent/agents/registry.py` | 2 å¤© | ğŸŸ¢ |
| - Agent é€‰æ‹© UI | æ‰‹åŠ¨åˆ‡æ¢ Agent | - | 2 å¤© | ğŸŸ¢ |
| - Handoff Pattern | Agent é—´åˆ‡æ¢ | `generalAgent/agents/` (call_agent) | 2 å¤© | ğŸŸ¢ |
| **4. LLM ç½‘å…³å‡çº§** | æ”¯æŒå¤šæ¨¡å‹è·¯ç”± | - | ğŸ”¸ **3-5 å¤©** | ğŸŸ¢ ä½ |
| - æ¨¡å‹å‚æ•°è·¯ç”± | æ¥æ”¶ model_id | - | 2 å¤© | ğŸŸ¢ |
| - å¤š LLM æ”¯æŒ | å¯¹æ¥æ›´å¤šæä¾›å•† | `generalAgent/config/settings.py` | 1 å¤© | ğŸŸ¢ |

### 3.4 V3 å·¥ä½œé‡æ±‡æ€»

| ç±»åˆ« | æ€»å·¥ä½œé‡ | è¯´æ˜ |
|------|---------|------|
| **æ¨¡å‹è·¯ç”±** | å¤© | è§„åˆ™å¼•æ“ + UI |
| **Multi-Agent** | å¤© | Subagent + æ—¥å¿— UI |
| **Agent æ³¨å†Œè¡¨** | å¤© | YAML + é€‰æ‹©å™¨ |
| **ç½‘å…³å‡çº§** | å¤© | å¤šæ¨¡å‹æ”¯æŒ |
| **æµ‹è¯•è°ƒè¯•** | å¤© | é›†æˆæµ‹è¯• |
| **V3 æ€»è®¡** | **å¤©** | **6-9 å‘¨ï¼ˆå•äººå…¨èŒï¼‰** |

### 3.5 V3 é‡Œç¨‹ç¢‘äº¤ä»˜

**Week 42 ç»“æŸæ—¶ï¼Œç”¨æˆ·èƒ½ï¼š**
- âœ… AI è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ¨¡å‹ï¼ˆVision/Code/Reasoningï¼‰
- âœ… çœ‹åˆ°å¤šä¸ª Agent åä½œæ‰§è¡Œä»»åŠ¡
- âœ… æŸ¥çœ‹ Subagent çš„è¯¦ç»†æ‰§è¡Œæ—¥å¿—
- âœ… æ‰‹åŠ¨åˆ‡æ¢ä¸åŒç±»å‹çš„ Agent
- âœ… ä½“éªŒæ™ºèƒ½çš„ä»»åŠ¡åˆ†è§£å’Œæ‰§è¡Œ

---

## ğŸš€ é‡Œç¨‹ç¢‘ V4: è‡ªåŠ¨åŒ–å·¥ä½œæµä¸ 1.0 å‘å¸ƒ (Workflows & Platform 1.0)

**ğŸ¯ æ ¸å¿ƒç›®æ ‡**ï¼šä»"Agent"è¿›åŒ–åˆ°"è‡ªåŠ¨åŒ–å·¥ä½œæµå¹³å°"ã€‚åœ¨**å®¢æˆ·ç«¯**äº¤ä»˜å¯å¤ç”¨çš„ `Workflow` æ¨¡æ¿ï¼Œå¹¶å®Œæˆæ‰€æœ‰æ–‡æ¡£å’Œå®‰å…¨åŠ å›ºï¼Œå‡†å¤‡ 1.0 æ­£å¼å‘å¸ƒã€‚

### 4.1 å¯å¿«é€Ÿè½åœ°åœºæ™¯/åŠŸèƒ½ (äº§å“åŠŸèƒ½)

* **Pipeline (æµæ°´çº¿) å·¥ä½œæµ**ï¼š
    * *åœºæ™¯*ï¼š"æ–‡æ¡£ç¿»è¯‘ä¸æ ¡å¯¹"ï¼šç”¨æˆ·ä¸Šä¼ æ–‡æ¡£ï¼Œ**å®¢æˆ·ç«¯å·¥ä½œæµ**è‡ªåŠ¨æ‰§è¡Œ [Step 1: æå–] â†’ [Step 2: ç¿»è¯‘] â†’ [Step 3: æ ¡å¯¹]ã€‚
* **Parallel (å¹¶è¡Œ) å·¥ä½œæµ**ï¼š
    * *åœºæ™¯*ï¼š"å…¨ç½‘ç«å“åˆ†æ"ï¼šç”¨æˆ·è¾“å…¥ç«å“åç§°ï¼Œ**å®¢æˆ·ç«¯å·¥ä½œæµ**è‡ªåŠ¨**å¹¶è¡Œ**æ‰§è¡Œ [Task 1: æœç´¢æ–°é—»] + [Task 2: æœç´¢åšå®¢]ã€‚
* **1.0 ç¨³å®šç‰ˆå¹³å°**ï¼šäº¤ä»˜æ‰€æœ‰æ–‡æ¡£ï¼Œå†»ç»“æ ¸å¿ƒ APIã€‚

### 4.2 å‰å°ç•Œé¢ä¸æ•°æ®å¥‘çº¦ (UI & API)

#### 4.2.1 å‰å°ç•Œé¢ (UI äº¤äº’)

**è¦å®ç°çš„åŠŸèƒ½ç‚¹ï¼š**

* åœ¨æ¨¡æ¿é€‰æ‹©å™¨ UI ä¸­ï¼Œå¢åŠ "å·¥ä½œæµ"åˆ†ç±»ã€‚
* **ã€V4 æ ¸å¿ƒäº¤äº’ã€‘** å®ç°ä¸€ä¸ª**å·¥ä½œæµè¿›åº¦ UI**ï¼Œç”¨äºå®æ—¶å±•ç¤º `WORKFLOW_...` äº‹ä»¶ã€‚
* æ­¤ UI åº”å½“èƒ½æ¸…æ™°å±•ç¤º `Pipeline` çš„æ­¥éª¤ï¼ˆå¦‚ "Step 2/3: æ­£åœ¨åˆ†æå†…å®¹..."ï¼‰æˆ– `Parallel` çš„å¹¶è¡Œä»»åŠ¡çŠ¶æ€ã€‚

**V4 äº¤ä»˜çš„æ¨¡æ¿ç¤ºä¾‹ (å·¥ä½œæµå¯åŠ¨è¡¨å•)ï¼š**

```json
{
  "agentId": "com.company.workflow.doc_process",
  "name": ["æ–‡æ¡£å¤„ç†æµæ°´çº¿", "Document Processing Workflow"],
  "description": "ï¼ˆå·¥ä½œæµï¼‰è‡ªåŠ¨æ‰§è¡Œ[æå–-åˆ†æ-æ€»ç»“]æµæ°´çº¿",
  "category": "å·¥ä½œæµ",
  "targetType": "workflow",
  "parameters": {
    "input": [
      {
        "name": "document",
        "type": "file",
        "label": "ä¸Šä¼ æ–‡æ¡£",
        "required": true
      },
      {
        "name": "taskType",
        "type": "select",
        "label": "å·¥ä½œæµç±»å‹",
        "options": [
          { "value": "report_summary", "label": "æŠ¥å‘Šæ€»ç»“", "default": true },
          { "value": "translation_proofread", "label": "ç¿»è¯‘ä¸æ ¡å¯¹" }
        ]
      }
    ]
  }
}
```

#### 4.2.2 å‰ç«¯äº‹ä»¶æµæ•°æ®å¥‘çº¦ (API è¾“å‡º)

*V1, V2, V3 äº‹ä»¶...* **(å¹¶æ–°å¢ä»¥ä¸‹ V4 äº‹ä»¶)**

| äº‹ä»¶ç±»å‹ (type) | è´Ÿè½½å†…å®¹ (payload) | UI å“åº” (äº¤äº’) |
| :--- | :--- | :--- |
| **`WORKFLOW_START`** | `{ "name": "æ–‡æ¡£å¤„ç†æµæ°´çº¿", "total_steps": 3 }` | **(å…³é”®)** éšè—èŠå¤©è¾“å…¥æ¡†ï¼Œæ˜¾ç¤º"å·¥ä½œæµè¿›åº¦" UIã€‚ |
| **`WORKFLOW_STEP_START`** | `{ "step_name": "extract", "step_index": 1, "total_steps": 3 }` | **(å…³é”®)** é«˜äº®æ˜¾ç¤º"Step 1: extract"ï¼Œå¹¶æ˜¾ç¤º"è¿›è¡Œä¸­..."ã€‚ |
| `WORKFLOW_STEP_LOG` | `{ "step_name": "extract", "log": "..." }` | (å¯é€‰) åœ¨æ­¥éª¤ä¸‹æ–¹æ˜¾ç¤ºæ—¥å¿—ã€‚ |
| **`WORKFLOW_STEP_END`** | `{ "step_name": "extract", "status": "success" }` | **(å…³é”®)** å°†"Step 1: extract"æ ‡è®°ä¸º"å·²å®Œæˆ"ï¼ˆç»¿è‰²å¯¹å‹¾ï¼‰ã€‚ |
| **`WORKFLOW_END`** | `{ "status": "success", "outputs": { "report": "..." } }` | æ˜¾ç¤º"å·¥ä½œæµå…¨éƒ¨å®Œæˆ"ï¼Œå¹¶åœ¨èŠå¤©æµä¸­è¾“å‡ºæœ€ç»ˆç»“æœã€‚ |

### 4.3 æ ¸å¿ƒåŠŸèƒ½å®ç° (æŠ€æœ¯å®ç°)

| åŠŸèƒ½æ¨¡å— | ç”¨æˆ·ä»·å€¼ | å‚è€ƒå®ç° | æ ¸å¿ƒå·¥ä½œé‡ | é£é™© |
|---------|---------|---------|-----------|------|
| **1. WorkflowEngine** | æ‰§è¡Œè‡ªåŠ¨åŒ–æµç¨‹ | - | ğŸ”¶ **15-20 å¤©** | ğŸŸ  ä¸­é«˜ |
| - YAML è§£æå™¨ | åŠ è½½å·¥ä½œæµå®šä¹‰ | - | 3 å¤© | ğŸŸ¢ |
| - Pipeline è°ƒåº¦ | é¡ºåºæ‰§è¡Œæ­¥éª¤ | - | 5 å¤© | ğŸŸ¡ |
| - Parallel è°ƒåº¦ | å¹¶è¡Œæ‰§è¡Œä»»åŠ¡ | - | 3 å¤© | ğŸŸ¡ |
| - é”™è¯¯å¤„ç†ä¸é‡è¯• | å¤±è´¥æ¢å¤æœºåˆ¶ | - | 4 å¤© | ğŸŸ  |
| **2. å·¥ä½œæµ UI** | å¯è§†åŒ–æµç¨‹æ‰§è¡Œ | - | ğŸ”¶ **7-10 å¤©** | ğŸŸ¡ ä¸­ |
| - å·¥ä½œæµé€‰æ‹©å™¨ | é€‰æ‹©é¢„è®¾æµç¨‹ | - | 2 å¤© | ğŸŸ¢ |
| - è¿›åº¦å¯è§†åŒ– | æ˜¾ç¤ºæ‰§è¡ŒçŠ¶æ€ | - | 3 å¤© | ğŸŸ¡ |
| - æ­¥éª¤æ—¥å¿— | æŸ¥çœ‹è¯¦ç»†æ—¥å¿— | - | 2 å¤© | ğŸŸ¢ |
| **3. é¢„è®¾å·¥ä½œæµ** | å¼€ç®±å³ç”¨çš„æµç¨‹ | - | ğŸ”¸ **5-7 å¤©** | ğŸŸ¢ ä½ |
| - æ–‡æ¡£å¤„ç†æµæ°´çº¿ | ç¿»è¯‘ã€æ ¡å¯¹ç­‰ | - | 3 å¤© | ğŸŸ¢ |
| - å¹¶è¡Œæœç´¢æµç¨‹ | ç«å“åˆ†æç­‰ | - | 2 å¤© | ğŸŸ¢ |
| **4. å®‰å…¨åŠ å›º** | ç”Ÿäº§çº§å®‰å…¨ | `generalAgent/hitl/` | ğŸ”¶ **10-15 å¤©** | ğŸŸ  ä¸­é«˜ |
| - è¾“å…¥éªŒè¯ | é˜²æ³¨å…¥æ”»å‡» | - | 3 å¤© | ğŸŸ¡ |
| - æ²™ç®±åŠ å›º | é˜²é€ƒé€¸ | - | 4 å¤© | ğŸŸ  |
| - ä¾èµ–å®¡è®¡ | æ£€æŸ¥æ¼æ´ | - | 2 å¤© | ğŸŸ¢ |
| **5. æ–‡æ¡£ä¸å‘å¸ƒ** | 1.0 æ­£å¼ç‰ˆ | `docs/` | ğŸ”¸ **10-15 å¤©** | ğŸŸ¢ ä½ |
| - ç”¨æˆ·æ‰‹å†Œ | è¯¦ç»†ä½¿ç”¨æŒ‡å— | - | 5 å¤© | ğŸŸ¢ |
| - è§†é¢‘æ•™ç¨‹ | å¿«é€Ÿä¸Šæ‰‹ | - | 3 å¤© | ğŸŸ¢ |
| - å‘å¸ƒæµç¨‹ | æ­£å¼å‘å¸ƒ | - | 2 å¤© | ğŸŸ¢ |

### 4.4 V4 å·¥ä½œé‡æ±‡æ€»

| ç±»åˆ« | æ€»å·¥ä½œé‡ | è¯´æ˜ |
|------|---------|------|
| **WorkflowEngine** | å¤© | æ ¸å¿ƒå¼•æ“å®ç° |
| **å·¥ä½œæµ UI** | å¤© | è¿›åº¦å¯è§†åŒ– |
| **é¢„è®¾æµç¨‹** | å¤© | YAML æ¨¡æ¿ |
| **å®‰å…¨åŠ å›º** | å¤© | å…¨é¢å®‰å…¨å®¡æŸ¥ |
| **æ–‡æ¡£å‘å¸ƒ** | å¤© | ç”¨æˆ·æ–‡æ¡£ + å‘å¸ƒ |
| **æµ‹è¯•è°ƒè¯•** | å¤© | æœ€ç»ˆæµ‹è¯• |
| **V4 æ€»è®¡** | **å¤©** | **11-15 å‘¨ï¼ˆå•äººå…¨èŒï¼‰** |

### 4.5 V4 é‡Œç¨‹ç¢‘äº¤ä»˜

**Week 57 ç»“æŸæ—¶ï¼ˆV4 å®Œæˆï¼‰ï¼š**
- âœ… åˆ›å»ºå’Œæ‰§è¡Œè‡ªåŠ¨åŒ–å·¥ä½œæµ
- âœ… ä½¿ç”¨é¢„è®¾çš„æµæ°´çº¿æ¨¡æ¿
- âœ… çœ‹åˆ°å¹¶è¡Œä»»åŠ¡çš„æ‰§è¡Œè¿›åº¦
- âœ… ç”Ÿäº§çº§çš„å®‰å…¨é˜²æŠ¤
- âœ… å®Œæ•´çš„ç”¨æˆ·æ–‡æ¡£å’Œæ•™ç¨‹
- âœ… **æ­£å¼å‘å¸ƒ 1.0 ç‰ˆæœ¬** ğŸ‰

---

### æ ¸å¿ƒå·¥ä½œé‡æ¨¡å—ï¼ˆæŒ‰é£é™©æ’åºï¼‰

#### ğŸ”´ é«˜å·¥ä½œé‡é«˜é£é™©ï¼ˆå¿…é¡»å…³æ³¨ï¼‰

1. **WorkflowEngine** (V4)
   - å¤æ‚çš„çŠ¶æ€æœºå’Œè°ƒåº¦é€»è¾‘
   - é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
   - éœ€è¦æ·±åº¦æµ‹è¯•

2. **ä¸Šä¸‹æ–‡ç®¡ç†** (V2)
   - LLM æ‘˜è¦å‹ç¼©ç®—æ³•
   - Token ç²¾ç¡®è®¡æ•°
   - å‹ç¼©è´¨é‡è¯„ä¼°
   - å‚è€ƒï¼š`generalAgent/context/compressor.py`, `graph/nodes/summarization.py`

3. **æ–‡æ¡£ç´¢å¼•æœç´¢** (V2)
   - ç´¢å¼•æ„å»ºä¸å­˜å‚¨
   - ç›¸å…³æ€§æ’åºç®—æ³•
   - è·¨æ ¼å¼æœç´¢ç»Ÿä¸€
   - å‚è€ƒï¼š`generalAgent/utils/text_indexer.py` (SQLite FTS5 + BM25)

#### ğŸŸ  ä¸­ç­‰å·¥ä½œé‡ä¸­ç­‰é£é™©

4. **Multi-Agent ç³»ç»Ÿ** (V3)
   - Subagent åµŒå¥—æ‰§è¡Œ
   - çŠ¶æ€ä¼ é€’ä¸ç»§æ‰¿
   - æ—¥å¿—å¯è§†åŒ–
   - å‚è€ƒï¼š`generalAgent/tools/builtin/delegate_task.py`

5. **HITL ç³»ç»Ÿ** (V2) 
   - 4 å±‚å®¡æ‰¹è§„åˆ™å¼•æ“
   - å¼¹çª— UI é›†æˆ
   - å‚è€ƒï¼š`generalAgent/hitl/approval_checker.py`, `approval_node.py`

6. **å®‰å…¨åŠ å›º** (V4) 
   - å…¨é¢å®‰å…¨å®¡æŸ¥
   - æ¼æ´ä¿®å¤
   - æ¸—é€æµ‹è¯•
---

## ğŸ“š å‚è€ƒå®ç°ç´¢å¼•

æœ¬è§„åˆ’çš„åŠŸèƒ½è®¾è®¡åŸºäºç°æœ‰ Python å®ç°ï¼ˆ`generalAgent/`ï¼‰ï¼Œä»¥ä¸‹æ˜¯å…³é”®æ¨¡å—çš„å‚è€ƒä½ç½®ï¼š

### æ ¸å¿ƒæ¶æ„
- **Agent Loop**: `generalAgent/graph/builder.py`, `nodes/planner.py`, `routing.py`
- **State ç®¡ç†**: `generalAgent/graph/state.py`
- **æ¨¡å‹æ³¨å†Œ**: `generalAgent/models/registry.py`

### å·¥å…·ç³»ç»Ÿ
- **å·¥å…·æ³¨å†Œ**: `generalAgent/runtime/app.py`
- **æ–‡ä»¶æ“ä½œ**: `generalAgent/tools/builtin/file_ops.py`
- **æ–‡ä»¶æœç´¢**: `generalAgent/tools/builtin/find_files.py`, `search_file.py`
- **Bash æ‰§è¡Œ**: `generalAgent/tools/builtin/run_bash_command.py`
- **TODO å·¥å…·**: `generalAgent/tools/builtin/todo_*.py`
- **å§”æ´¾ä»»åŠ¡**: `generalAgent/tools/builtin/delegate_task.py`
- **ä¸»åŠ¨æé—®**: `generalAgent/tools/builtin/ask_human.py`

### æŠ€èƒ½ç³»ç»Ÿ
- **æŠ€èƒ½æ³¨å†Œ**: `generalAgent/runtime/app.py`, `config/skill_config_loader.py`
- **æŠ€èƒ½é…ç½®**: `generalAgent/config/skills.yaml`
- **@mention è§£æ**: `generalAgent/utils/mention_classifier.py`
- **æŠ€èƒ½åŒ…ç¤ºä¾‹**: `generalAgent/skills/pdf/`, `skills/docx/`, `skills/xlsx/`

### HITL ç³»ç»Ÿ
- **å®¡æ‰¹æ£€æŸ¥å™¨**: `generalAgent/hitl/approval_checker.py`
- **å®¡æ‰¹èŠ‚ç‚¹**: `generalAgent/hitl/approval_node.py`
- **å®¡æ‰¹è§„åˆ™**: `generalAgent/config/hitl_rules.yaml`
- **CLI äº¤äº’**: `generalAgent/cli.py:370-443`

### ä¸Šä¸‹æ–‡ç®¡ç†
- **å‹ç¼©å™¨**: `generalAgent/context/compressor.py`
- **æ‘˜è¦èŠ‚ç‚¹**: `generalAgent/graph/nodes/summarization.py`
- **è·¯ç”±é€»è¾‘**: `generalAgent/graph/routing.py`

### æ–‡æ¡£å¤„ç†
- **æ–‡æ¡£æå–**: `generalAgent/utils/document_extractors.py`
- **æ–‡æœ¬ç´¢å¼•**: `generalAgent/utils/text_indexer.py`
- **æœç´¢å·¥å…·**: `generalAgent/tools/builtin/search_file.py`

### Multi-Agent
- **Agent æ³¨å†Œ**: `generalAgent/agents/registry.py`
- **Agent é…ç½®**: `generalAgent/config/agents.yaml`
- **SimpleAgent**: `simpleAgent/simple_agent.py`

### ä¼šè¯ç®¡ç†
- **ä¼šè¯å­˜å‚¨**: `shared/session/store.py`
- **ä¼šè¯ç®¡ç†**: `shared/session/manager.py`
- **å·¥ä½œåŒºç®¡ç†**: `shared/workspace/manager.py`

### é…ç½®ç³»ç»Ÿ
- **è®¾ç½®ç®¡ç†**: `generalAgent/config/settings.py`
- **å·¥å…·é…ç½®**: `generalAgent/config/tools.yaml`
- **æŠ€èƒ½é…ç½®**: `generalAgent/config/skills.yaml`
- **Agent é…ç½®**: `generalAgent/config/agents.yaml`
- **HITL é…ç½®**: `generalAgent/config/hitl_rules.yaml`
